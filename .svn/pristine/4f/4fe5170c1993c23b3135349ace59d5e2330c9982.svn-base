<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>
<script type="text/JavaScript" src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<script type="text/javascript" src="/resources/js/jquery-3.6.4.min.js"></script>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=00b9512c890219b30461ddb8688695ac"></script>

<head>
	<title>Wonderway-숙소 상세정보</title>
	
<style>

.choices{
	width:6rem;	
}


/*토스트창  */
#toastRmNum{
  position: fixed;
  bottom: 50%;
  left: 48%;
  width:11rem;
  background-color:#F5F5F6;
  opacity: 0;
  transition: opacity 0.5s ease;
}
#toastRmNum.show {
  opacity: 1;
} 

/*링크 복사 토스트창  */
#toastCopyLink{
  position: fixed;
  top: 30%;
  left: 50%;
  transform: translateX(-50%);
  width:20rem;
  text-align:center;
  background-color:#F5F5F6;
  opacity: 0;
  transition: opacity 0.5s ease;
}
#toastCopyLink.show {
  opacity: 1;
} 

</style>

<script type="text/javascript">
$(function() {
	flatpickr(".flatpickr", {
		minDate: "today",
		dateFormat:"y/m/d",
		local: "ko"
		});
	});

$(function() {
	var mapContainer = document.getElementById('kakaoMap'), // 지도를 표시할 div 
    mapOption = { 
        center: new kakao.maps.LatLng(${busiVO.lati}, ${busiVO.longi}), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };

	// 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
	var map = new kakao.maps.Map(mapContainer, mapOption); 
	
	// 마커가 표시될 위치입니다 
	var markerPosition  = new kakao.maps.LatLng(${busiVO.lati}, ${busiVO.longi}); 

	// 마커를 생성합니다
	var marker = new kakao.maps.Marker({
	    position: markerPosition
	});

	// 마커가 지도 위에 표시되도록 설정합니다
	marker.setMap(map); 

	// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
	var mapTypeControl = new kakao.maps.MapTypeControl();

	// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
	// kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
	map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

	// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
	var zoomControl = new kakao.maps.ZoomControl();
	map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
	
	
	$("#mapmodal").on('shown.bs.modal',function(){
		map.relayout()
		map.setCenter()
		
	});
});

//카카오톡 공유하기 
$(function() {
	$("#kakaoShare").on("click",function() {
		Kakao.init('92113e51809f8d4ec0f9375fd165983d');
		Kakao.isInitialized();
		
		Kakao.Share.sendCustom({
			templateId: ${95735},
			templateArgs: {
			    title: '${busiVO.busiNm}',
			    description: '${busiVO.busiLoc}',
			    busiId:'${busiVO.busiId}',
			  },
		});
	});
});


//객실 상세정보 보기
$(function() {
	$(".btnRoomDetail").on("click",function() {
		var rmId=$(this).data("value")
		
		$.ajax({
			type : "post",
			url : "/member/acm/rmDetail",
			data : {"rmId" : rmId},
			dataType : "json",
			beforeSend : function(xhr) {
				xhr.setRequestHeader("${_csrf.headerName}",
						"${_csrf.token}");
			},
			success : function(result) {
				var rmVO= result;
				console.log(rmVO)
				console.log(rmVO[0].rmNm)
				$("#rmNm").html(rmVO[0].rmNm)
				$("#modal-rmDc").html(rmVO[0].rmDc)
				$("#stdPp").html("적정 수용 인원: "+ rmVO[0].stdPp)
				$("#maxPp").html("최대 수용 인원: "+ rmVO[0].maxPp)
				$("#ppExFee").html("인당 추가 요금: "+ rmVO[0].ppExFee)
				//$("#ppExFee").html("방 개수"+ rmVO[0].rmDeVOList.size())
			
			}
		});
	});
});

//예약하기 버튼 클릭시 
$(function() {
	$(".btnRsv").on("click",function(){
		var selectedVal= $("#rmNumSelect",this.form).children("option:selected").val()
		//방번호를 선택 안했을경우- 토스트창 실행 
		if(selectedVal==""){
			event.preventDefault(); 
			$('#toastRmNum').toast('show');
			setTimeout(function() {
			    $('#toastRmNum').toast('hide');
			  }, 2000);
			 
		//방번호 선택시 폼 제출 
		}else{
			$("#rmNum",this.form).val(selectedVal)
// 			$("#rsvForm").submit()	
			this.form.submit()
		}

	})
});



//공유하기- url복사하기 기능
$(function() {
	$("#copyLink").on("click",function(){
		
		var url = window.document.location.href;
		var textarea = document.createElement("textarea");
		
		document.body.appendChild(textarea);
		textarea.value = url;
		textarea.select();
		document.execCommand("copy");
		document.body.removeChild(textarea);
		
		$('#toastCopyLink').toast('show');
		setTimeout(function() {
		    $('#toastCopyLink').toast('hide');
		  }, 2000);

	});
});

//탭에 해시 부여
$(function() {
	$(".nav-link.mb-0").on("click",function(){
		var hash= $(this).attr("id")
		window.location.hash = hash
	});
});

//해시탭 활성화 
$(function() {
	  var hash = window.location.hash;
	  if (hash) {
			var id = hash.slice(1);
			$(".nav-link").removeClass("active"); 
			$(".tab-pane").removeClass("show active");
			$("#"+id).addClass("active").addClass("border-0");
			$("#tour-pills-"+id).addClass("show active");

	  }
});

//객실 재검색 
$(function() {
	$("#btnSearch").on("click",function(){
		var data={
			"rsvSt":$("#chckIn").val(),
			"rsvEd":$("#chckOut").val(),
			"busiId":$()
		}
		
		$.ajax({
			type : "get",
			url : "/member/acm/detail/rmSearch",
			data : JSON.stringify(data),
			dataType : "json",
			contentType : "application/json;charset=utf-8",
			beforeSend : function(xhr) {
				xhr.setRequestHeader("${_csrf.headerName}",
						"${_csrf.token}");
			},
			success : function(result) {
				console.log("result : " + JSON.stringify(result));
			}
		});

	})
});


//객실보기 버튼 클릭시 
$(function() {
	$("#btnRm").on("click",function(){
		$(".nav-link").removeClass("active"); 
		$(".tab-pane").removeClass("show active");
		$("#tab3").addClass("active").addClass("border-0");
		$("#tour-pills-tab3").addClass("show active");

	})
});
</script>	
</head>
<body>
<!-- **************** MAIN CONTENT START **************** -->
<main>

<!-- =======================
Main Title START -->
<section class="py-0 pt-sm-5">
	<div class="container position-relative">
		<!-- Title and button START -->
		<div class="row mb-3">
			<div class="col-12">
				<!-- Meta -->
				<div class="d-lg-flex justify-content-lg-between mb-1">
					<!-- Title -->
					<div class="mb-2 mb-lg-0">
						<h1 class="fs-2">${busiVO.busiNm}</h1>
						<!-- Location -->
						<p class="fw-bold mb-0"><i class="bi bi-geo-alt me-2"></i>${busiVO.busiLoc}
							<a id="btnKakaoMap" href="#" class="ms-2 text-decoration-underline" data-bs-toggle="modal" data-bs-target="#mapmodal">
								<i class="bi bi-eye-fill me-1"></i>지도에서 보기
							</a>
						</p>
					</div>

					<!-- Buttons -->
					<ul class="list-inline text-end">
						<!-- Heart icon -->
						<li class="list-inline-item">
							<a href="#" class="btn btn-sm btn-light px-2"><i class="fa-solid fa-fw fa-heart"></i></a>
						</li>
						<!-- Share icon -->
						<li class="list-inline-item dropdown">
							<!-- Share button -->
							<a href="#" class="btn btn-sm btn-light px-2" role="button" id="dropdownShare" data-bs-toggle="dropdown" aria-expanded="false">
								<i class="fa-solid fa-fw fa-share-alt"></i>
							</a>
							<!-- dropdown button -->
							<ul class="dropdown-menu dropdown-menu-end min-w-auto shadow rounded" aria-labelledby="dropdownShare">
								<li><a id="kakaoShare" class="dropdown-item"><i class="fa fa-comment me-2"></i>카카오톡 공유하기</a></li>
								<li><a id ="copyLink" class="dropdown-item"><i class="fa-solid fa-copy me-2"></i>링크 복사하기</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- Title and button END -->

	</div>
</section>
<!-- =======================
Main Title END -->

<!-- =======================
Image gallery START -->
<section class="card-grid pt-0 mb">
	<div class="container">
		<div class="row g-2">
			<!-- Image -->
			<div class="col-md-6">
				<a data-glightbox data-gallery="gallery" href="/resources/booking/assets/images/gallery/14.jpg">
					<div class="card card-grid-lg card-element-hover card-overlay-hover overflow-hidden" style="background-image:url(/resources/booking/assets/images/gallery/14.jpg); background-position: center left; background-size: cover;">
						<!-- Card hover element -->
						<div class="hover-element position-absolute w-100 h-100">
							<i class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"></i>
						</div>
					</div>
				</a>
			</div>

			<div class="col-md-6">
				<!-- Card item START -->
				<div class="row g-2"> 
					<!-- Image -->
					<div class="col-12">
						<a data-glightbox data-gallery="gallery" href="/resources/booking/assets/images/gallery/13.jpg">
							<div class="card card-grid-sm card-element-hover card-overlay-hover overflow-hidden" style="background-image:url(/resources/booking/assets/images/gallery/13.jpg); background-position: center left; background-size: cover;">
								<!-- Card hover element -->
								<div class="hover-element position-absolute w-100 h-100">
									<i class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"></i>
								</div>
							</div>
						</a>	
					</div>

					<!-- Image -->
					<div class="col-md-6">
						<a data-glightbox data-gallery="gallery" href="/resources/booking/assets/images/gallery/12.jpg">
							<div class="card card-grid-sm card-element-hover card-overlay-hover overflow-hidden" style="background-image:url(/resources/booking/assets/images/gallery/12.jpg); background-position: center left; background-size: cover;">
								<!-- Card hover element -->
								<div class="hover-element position-absolute w-100 h-100">
									<i class="bi bi-fullscreen fs-6 text-white position-absolute top-50 start-50 translate-middle bg-dark rounded-1 p-2 lh-1"></i>
								</div>
							</div>
						</a>	
					</div>

					<!-- Images -->
					<div class="col-md-6">
						<div class="card card-grid-sm overflow-hidden" style="background-image:url(/resources/booking/assets/images/gallery/11.jpg); background-position: center left; background-size: cover;">
							<!-- Background overlay -->
							<div class="bg-overlay bg-dark opacity-7"></div>

							<!-- Popup Images -->
							<a data-glightbox="" data-gallery="gallery" href="/resources/booking/assets/images/gallery/11.jpg" class="stretched-link z-index-9"></a>
							<a data-glightbox="" data-gallery="gallery" href="/resources/booking/assets/images/gallery/15.jpg"></a>
							<a data-glightbox="" data-gallery="gallery" href="/resources/booking/assets/images/gallery/16.jpg"></a>

							<!-- Overlay text -->
							<div class="card-img-overlay d-flex h-100 w-100">
								<h6 class="card-title m-auto fw-light text-decoration-underline"><a href="#" class="text-white">더보기</a></h6>
							</div>
						</div>
					</div>
				</div>
				<!-- Card item END -->
			</div>
		</div>
	</div>
</section>
<!-- =======================
Image gallery END -->

<!-- =======================
탭 START-->
<section class="py-0 mt-0">
	<div class="container">
		<!-- 탭 START -->
		<div class="row">
			<div class="col-12">
				<!-- Outer tabs START -->
				<ul class="nav nav-pills nav-justified nav-responsive bg-primary bg-opacity-10 rounded p-2" id="tour-pills-tab" role="tablist">
					<!-- Tab item -->
					<li class="nav-item" role="presentation">
						<button class="nav-link active mb-0" id="tab1" data-bs-toggle="pill" data-bs-target="#tour-pills-tab1" type="button" role="tab" aria-controls="tour-pills-tab1" aria-selected="true">개요</button>
					</li>
					<!-- Tab item -->
					<li class="nav-item" role="presentation">
						<button class="nav-link mb-0" id="tab2" data-bs-toggle="pill" data-bs-target="#tour-pills-tab2" type="button" role="tab" aria-controls="tour-pills-tab2" aria-selected="false">편의시설/서비스</button>
					</li>
					<!-- Tab item -->
					<li class="nav-item" role="presentation">
						<button class="nav-link mb-0" id="tab3" data-bs-toggle="pill" data-bs-target="#tour-pills-tab3" type="button" role="tab" aria-controls="tour-pills-tab3" aria-selected="false">객실</button>
					</li>
					<!-- Tab item -->
					<li class="nav-item" role="presentation">
						<button class="nav-link mb-0" id="tab4" data-bs-toggle="pill" data-bs-target="#tour-pills-tab4" type="button" role="tab" aria-controls="tour-pills-tab4" aria-selected="false">이용 후기</button>
					</li>
					<!-- Tab item -->
					<li class="nav-item" role="presentation">
						<button class="nav-link mb-0" id="tab5" data-bs-toggle="pill" data-bs-target="#tour-pills-tab5" type="button" role="tab" aria-controls="tour-pills-tab5" aria-selected="false">숙소 정보 및 정책</button>
					</li>
				</ul> 
				<!-- Outer tabs END -->
			</div>
		</div>
		<!-- Tabs END -->
	</div>
</section>
<!-- =======================
탭 END -->


<!-- =======================
Tabs-content START -->
<section class="pt-4 pt-md-5">
	<div class="container">

		<div class="row g-4 g-md-5">
			<!-- Tabs Content START -->
			<div class="col-xl-8">
				<!-- Outer tabs contents START -->
				<div class="tab-content mb-0" id="tour-pills-tabContent">

					<!-- 개요 START -->
					<div class="tab-pane fade show active" id="tour-pills-tab1" role="tabpanel" aria-labelledby="tour-pills-tab1">
						<div class="card bg-transparent p-0">
						<!-- Card header -->
						<div class="card-header border-bottom bg-transparent px-0 pt-0">
							<h3 class="mb-0">숙소 개요</h3>
						</div>

						<!-- Card body START -->
						<div class="card-body pt-4 p-0">
							
							<h5 class="fw-light mb-2">주요 정보</h5>
							<ul class="list-group list-group-borderless mb-4">
								<li class="list-group-item h6 fw-light d-flex mb-0"><i class="bi bi-patch-check-fill text-success me-2"></i><b>체크인 : &nbsp;</b> <a class="text-success">${busiVO.chckIn}</a>&nbsp;이후 &nbsp; <b>체크아웃 :&nbsp; </b> <a class="text-success">${busiVO.chckOut}</a>&nbsp;이전</li>
								<li class="list-group-item h6 fw-light d-flex mb-0"><i class="bi bi-patch-check-fill text-success me-2"></i><b>평균별점 :</b>&nbsp;<i class="fa-solid fa-star text-warning"></i>${busiVO.avgSt}</li>
								<li class="list-group-item h6 fw-light d-flex mb-0"><i class="bi bi-patch-check-fill text-success me-2"></i><b>흡연 관련 정책 :</b> &nbsp;
								<c:out value="${mapKPDS.SMOKING eq 'Y' ? '객실 내 흡연 가능' : '객실 내 금연'}"/></li>
								<li class="list-group-item h6 fw-light d-flex mb-0"><i class="bi bi-patch-check-fill text-success me-2"></i><b>아동 동반가능 여부 :</b> &nbsp; 
								<c:out value="${mapKPDS.KID eq 'Y' ? '아동 출입 가능' : '아동 출입 불가'}"/></li>
								<li class="list-group-item h6 fw-light d-flex mb-0"><i class="bi bi-patch-check-fill text-success me-2"></i><b>반려동물 동반가능 여부 :</b> &nbsp; 
								<c:out value="${mapKPDS.PET eq 'Y' ? '반려동물 출입 가능' : '반려동물 출입 불가'}"/></li>
								
							</ul>
							
							
							
							
							<h5 class="fw-light mb-2">간단 소개</h5>
							<p class="mb-3">${busiVO.busiInfo}</b></p>
							
						</div>
						<!-- Card body END -->
						</div>
					</div>		
					<!-- 개요 END -->

					<!-- Content item START -->
					<div class="tab-pane fade" id="tour-pills-tab2" role="tabpanel" aria-labelledby="tour-pills-tab2">
						<div class="card bg-transparent p-0">
							<!-- Card header -->
							<div class="card-header border-bottom bg-transparent px-0 pt-0">
								<h3 class="card-title mb-0">편의시설 및 서비스</h3>
							</div>
	
							<!-- Card body START -->
							<div class="card-body pt-4 p-0">
								
								<div class="row g-4">
									<h6><i class="fa-solid fa-check-circle text-success me-2"></i>아동/장애인/반려동물 관련</h6>
									<c:forEach var="cvfcVO" items="${cvfcVOList}" varStatus="stat">
									<c:if test = "${cvfcVO.cvfcType=='접근성'}">
										<div class="col-sm-2">
											<div class="icon-xl bg-light h5 rounded-2 mx-auto">
												<i class="fa-solid ${cvfcVO.icon}"></i>
											</div>
											<ul class="list-group list-group-borderless mt-2 mb-0">
												<li class="list-group-item pb-0 mx-auto">${cvfcVO.cvfcNm}</li>
											</ul>
										</div>
									</c:if>
									</c:forEach>
									
									
									<h6><i class="fa-solid fa-check-circle text-success me-2"></i>시설 및 서비스</h6>
									<c:forEach var="cvfcVO" items="${cvfcVOList}" varStatus="stat">
									<c:if test = "${cvfcVO.cvfcType=='시설/서비스'}">
										<div class="col-sm-2">
											<div class="icon-xl bg-light h5 rounded-2 mx-auto">
												<i class="fa-solid ${cvfcVO.icon}"></i>
											</div>
											<ul class="list-group list-group-borderless mt-2 mb-0">
												<li class="list-group-item pb-0 mx-auto">${cvfcVO.cvfcNm}</li>
											</ul>
										</div>
									</c:if>
									</c:forEach>
									
									
									<h6><i class="fa-solid fa-check-circle text-success me-2"></i>청결 및 안전</h6>
									<c:forEach var="cvfcVO" items="${cvfcVOList}" varStatus="stat">
									<c:if test = "${cvfcVO.cvfcType=='청결/안전'}">
										<div class="col-sm-2">
											<div class="icon-xl bg-light h5 rounded-2 mx-auto">
												<i class="fa-solid ${cvfcVO.icon}"></i>
											</div>
											<ul class="list-group list-group-borderless mt-2 mb-0 ">
												<li class="list-group-item pb-0 mx-auto">${cvfcVO.cvfcNm}</li>
											</ul>
										</div>
									</c:if>
									</c:forEach>
									
									<h6><i class="fa-solid fa-check-circle text-success me-2"></i>모든 객실에서 이용 가능</h6>
									<c:forEach var="cvfcVO" items="${cvfcVOList}" varStatus="stat">
									<c:if test = "${cvfcVO.cvfcType=='객실별'}">
										<div class="col-sm-2">
											<div class="icon-xl bg-light h5 rounded-2 mx-auto">
												<i class="fa-solid ${cvfcVO.icon}"></i>
											</div>
											<ul class="list-group list-group-borderless mt-2 mb-0">
												<li class="list-group-item pb-0 mx-auto">${cvfcVO.cvfcNm}</li>
											</ul>
										</div>
									</c:if>
									</c:forEach>	
									
									</div>
									
		
								</div>
						</div>
						<!-- Card body END -->
					</div>	
					<!-- Content item END -->

					<!-- 객실 START -->
					<div class="tab-pane fade" id="tour-pills-tab3" role="tabpanel" aria-labelledby="tour-pills-tab3">
						<div class="card bg-transparent p-0">
							<!-- Card header -->
						<div class="card-header border-bottom bg-transparent px-0 pt-0">
							<div class="d-sm-flex justify-content-sm-between align-items-center">
								<h3 class="mb-2 mb-sm-0">이용가능 객실</h3>
	
							</div>
						</div>
						<!-- Card body START -->
						<div class="card-body pt-4 p-0">
							<form class="row g-4 mb-4" action="/member/acm/detail/${busiVO.busiId}#tab3" method="get">
									
									<!-- Date -->
									<div class="col-lg-5">
										<div class="form-icon-input form-fs-lg">
											<input name="rsvSt" type="text" class="form-control form-control-lg flatpickr"  data-date-format="y/m/d" placeholder="체크 인:  ${rsvSt}">
											<span class="form-icon"><i class="bi bi-calendar fs-5"></i></span>
										</div>
									</div>

									<!-- Date -->
									<div class="col-lg-5">
										<div class="form-icon-input form-fs-lg">
											<input name="rsvEd" type="text" class="form-control form-control-lg flatpickr"  data-date-format="y/m/d" placeholder="체크 아웃: ${rsvEd}">
											<span class="form-icon"><i class="bi bi-calendar fs-5"></i></span>
										</div>
									</div>

									<!-- 검색버튼 -->
									<div class="col-lg-2">
										<button type="submit" class="icon-lg btn btn-round btn-primary mb-0"><i class="bi bi-search fa-fw"></i></button>
									</div>
								
					<sec:csrfInput />
				</form>
						
						
						
							<div class="vstack gap-4">
								<c:forEach var="rmVO" items="${rmVOList}" varStatus="stat">
 								<form id="rsvForm" method="post" action="/member/acm/reserveRm">
								<!-- Room item START -->
								<div class="card shadow p-3 mb-3">
									<div class="row g-4">
										<!-- Card img -->
										<div class="col-md-5 position-relative">

											<!-- Overlay item -->
											<div class="position-absolute top-0 start-0 z-index-1 mt-3 ms-4">

											</div>

											<!-- Slider START -->
											<div class="tiny-slider arrow-round arrow-xs arrow-dark overflow-hidden rounded-2">
												<div class="tiny-slider-inner" data-autoplay="true" data-arrow="true" data-dots="false" data-items="1">
													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/04.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/02.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/03.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/01.jpg" alt="Card image"></div>
												</div>
											</div>
											<!-- Slider END -->

										</div>

										<!-- Card body -->
										<div class="col-md-7">
											<div class="card-body d-flex flex-column h-100 p-0">
					
												<!-- Title -->
												<div class="d-flex justify-content-between mt-2">
													<h5 class="card-title"><a href="#">${rmVO.rmNm}</a></h5>
													<a class="btnRoomDetail" href="#" class="btn btn-link text-decoration-underline p-0 mb-0 mt-3" data-bs-toggle="modal" data-bs-target="#roomDetail" data-value="${rmVO.rmId}"><i class="bi bi-eye-fill me-1"></i>방 상세정보 보기</a>
												</div>

												<!-- Amenities -->
												<ul class="nav nav-divider mb-2">
													<li class="nav-item">${rmVO.rmBed}</li>
												</ul>

												<p class="text-success mb-0">적정 수용 인원: ${rmVO.stdPp}명</p>
												<p class="text-success mb-0">최대 수용 인원: ${rmVO.maxPp}명</p>
												<p class="text-success mb-0">1인당 추가 비용: ${rmVO.ppExFee}원</p>
												
												
												<!-- Price and Button -->
												<div class="d-sm-flex justify-content-sm-between align-items-center mt-auto">
													<!-- Price -->
													<div class="d-flex align-items-center">
													<fmt:formatNumber var="formattedRmPr" value="${rmVO.rmPr}" pattern="#,###,###"/>
														<h5 class="fw-bold mb-0 me-1">${formattedRmPr}원</h5>
														<span class="mb-0 me-2">/1박</span>
													</div>
													<!-- 버튼 -->
													<div class="col-6 d-flex align-items-center mt-3 mt-sm-0">
														<select id="rmNumSelect" class="js-choice border-0" >
															<option value="">방 번호</option>
															<c:forEach var="rmDeVO" items="${rmVO.rmDeVOList}" varStatus="stat">
															<option value="${rmDeVO.rmNum}">${rmDeVO.rmNum}호</option>
															</c:forEach>
														</select>
														<button type="submit" class="btnRsv btn btn-primary mb-0 mx-1">예약하기</button>    
														
													</div>                  
												</div>
											</div>
										</div>
									</div>
								</div>
								<!--form에 넘겨주기 위해   -->
								<input type="hidden" value="${busiVO.busiId}" name="busiId">
								<input type="hidden" value="${rmVO.rmId}" name="rmId">
								<input type="hidden" id="rmNum" name="rmNum">
								<!-- Room item END -->
								<sec:csrfInput />
								</form>
								</c:forEach>
								
								<!--이미예약된 객실이지만  보여주기..  -->
								<c:forEach var="rsvedRmVO" items="${rsvedRmVOList}" varStatus="stat">
								<!-- Room item START -->
								<div class="card shadow p-3" style="background-color:#E6E6E6">
									<div class="row g-4" >
									
										<!-- Card img -->
										<div class="col-md-5 position-relative">

											<!-- Overlay item -->
											<div class="position-absolute top-0 start-0 z-index-1 mt-3 ms-4">

											</div>

											<!-- Slider START -->
											<div class="tiny-slider arrow-round arrow-xs arrow-dark overflow-hidden rounded-2">
												<div class="tiny-slider-inner" data-autoplay="true" data-arrow="true" data-dots="false" data-items="1">
													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/04.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/02.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/03.jpg" alt="Card image"></div>

													<!-- Image item -->
													<div><img src="/resources/booking/assets/images/category/hotel/4by3/01.jpg" alt="Card image"></div>
												</div>
											</div>
											<!-- Slider END -->

										</div>

										<!-- Card body -->
										<div class="col-md-7">
											<div class="card-body d-flex flex-column h-100 p-0">
					
												<!-- Title -->
												<div class="d-flex justify-content-between mt-2">
													<h5 class="card-title"><a href="#">${rsvedRmVO.rmNm}</a></h5>
													<a class="btnRoomDetail" href="#" class="btn btn-link text-decoration-underline p-0 mb-0 mt-3" data-bs-toggle="modal" data-bs-target="#roomDetail" data-value="${rmVO.rmId}"><i class="bi bi-eye-fill me-1"></i>방 상세정보 보기</a>
												</div>

												<!-- Amenities -->
												<ul class="nav nav-divider mb-2">
													<li class="nav-item">${rsvedRmVO.rmBed}</li>
												</ul>

												<p class="text-success mb-0">적정 수용 인원: ${rsvedRmVO.stdPp}명</p>
												<p class="text-success mb-0">최대 수용 인원: ${rsvedRmVO.maxPp}명</p>
												<p class="text-success mb-0">1인당 추가 비용: ${rsvedRmVO.ppExFee}원</p>
												
												
												<!-- Price and Button -->
												<div class="d-sm-flex justify-content-sm-between align-items-center mt-auto">
													<!-- Button -->
													<div class="d-flex align-items-center">
														<h5 class="fw-bold mb-0 me-1">${rsvedRmVO.rmPr}</h5>
														<span class="mb-0 me-2">/1박</span>
													</div>
													<!-- Price -->
													<div class="col-6 d-flex align-items-center mt-3 mt-sm-0">
														<select id="rmNumSelect" class="js-choice border-0" >
															<option value="">방 번호</option>
															<c:forEach var="rmDeVO" items="${rsvedRmVO.rmDeVOList}" varStatus="stat">
															<option value="${rmDeVO.rmNum}">${rmDeVO.rmNum}호</option>
															</c:forEach>
														</select>
														<button type="button" class="btn btn-danger mb-0 mx-1" disabled="true">예약하기</button>    
														
													</div>                  
													
												</div>
											</div>
										</div>
									</div>
								</div>
								<!-- Room item END -->
								
								</c:forEach>
								
							</div>
						</div>
						<!-- Card body END -->
						</div>
					</div>	
					<!-- 객실 END -->
					
					
					<!--리뷰 START -->
					<div class="tab-pane fade" id="tour-pills-tab4" role="tabpanel" aria-labelledby="tour-pills-tab4">
						<div class="card bg-transparent p-0">
						<!-- Card header -->
						<div class="card-header border-bottom bg-transparent px-0 pt-0">
							<h3 class="card-title mb-0">사용자 이용 후기</h3>
						</div>

						<!-- Card body START -->
						<div class="card-body pt-4 p-0">
							<!-- Progress bar and rating START -->
							<div class="card bg-light p-4 mb-4">
								<div class="row g-4 align-items-center">
									<!-- Rating info -->
									<div class="col-md-4">
										<div class="text-center">
											<!-- Info -->
											<h2 class="mb-0">${busiVO.avgSt}</h2>
											<p class="mb-2">${rvwTotal}개의 리뷰가 있습니다</p>
											<!-- Star -->
											<ul class="list-inline mb-0">
												<li class="list-inline-item me-0"><i class="fa-solid fa-star text-warning"></i></li>
												<li class="list-inline-item me-0"><i class="fa-solid fa-star text-warning"></i></li>
												<li class="list-inline-item me-0"><i class="fa-solid fa-star text-warning"></i></li>
												<li class="list-inline-item me-0"><i class="fa-solid fa-star text-warning"></i></li>
												<li class="list-inline-item me-0"><i class="fa-solid fa-star-half-alt text-warning"></i></li>
											</ul>
										</div>
									</div>

									<!-- Progress-bar START -->
									<div class="col-md-8">
										<div class="card-body p-0">
											<div class="row gx-3 g-2 align-items-center">
												<!-- Progress bar and Rating -->
												<div class="col-9 col-sm-10">
													<!-- Progress item -->
													<div class="progress progress-sm bg-warning bg-opacity-15">
														<div class="progress-bar bg-warning" role="progressbar" style="width: 95%" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100">
														</div>
													</div>
												</div>
												<!-- Percentage -->
												<div class="col-3 col-sm-2 text-end">
													<span class="h6 fw-light mb-0">85%</span>
												</div>

												<!-- Progress bar and Rating -->
												<div class="col-9 col-sm-10">
													<!-- Progress item -->
													<div class="progress progress-sm bg-warning bg-opacity-15">
														<div class="progress-bar bg-warning" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
														</div>
													</div>
												</div>
												<!-- Percentage -->
												<div class="col-3 col-sm-2 text-end">
													<span class="h6 fw-light mb-0">75%</span>
												</div>

												<!-- Progress bar and Rating -->
												<div class="col-9 col-sm-10">
													<!-- Progress item -->
													<div class="progress progress-sm bg-warning bg-opacity-15">
														<div class="progress-bar bg-warning" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100">
														</div>
													</div>
												</div>
												<!-- Percentage -->
												<div class="col-3 col-sm-2 text-end">
													<span class="h6 fw-light mb-0">60%</span>
												</div>

												<!-- Progress bar and Rating -->
												<div class="col-9 col-sm-10">
													<!-- Progress item -->
													<div class="progress progress-sm bg-warning bg-opacity-15">
														<div class="progress-bar bg-warning" role="progressbar" style="width: 35%" aria-valuenow="35" aria-valuemin="0" aria-valuemax="100">
														</div>
													</div>
												</div>
												<!-- Percentage -->
												<div class="col-3 col-sm-2 text-end">
													<span class="h6 fw-light mb-0">35%</span>
												</div>

												<!-- Progress bar and Rating -->
												<div class="col-9 col-sm-10">
													<!-- Progress item -->
													<div class="progress progress-sm bg-warning bg-opacity-15">
														<div class="progress-bar bg-warning" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
														</div>
													</div>
												</div>
												<!-- Percentage -->
												<div class="col-3 col-sm-2 text-end">
													<span class="h6 fw-light mb-0">15%</span>
												</div>
											</div> <!-- Row END -->
										</div>
									</div>
									<!-- Progress-bar END -->

								</div>
							</div>
							<!-- Progress bar and rating END -->


							${rvw.content}
							<!-- 리뷰 item START -->
							<c:forEach var="rvwVO" items="${rvw.content}" varStatus="stat">
							<div class="d-md-flex my-4">
								<!-- Avatar -->
								<div class="avatar avatar-lg me-3 flex-shrink-0">
									<img class="avatar-img rounded-circle" src="/resources/booking/assets/images/avatar/09.jpg" alt="avatar">
								</div>
								<!-- Text -->
								<div>
									<div class="d-flex justify-content-between mt-1 mt-md-0">
										<div>
											<h6 class="me-3 mb-0">${rvwVO.memId}</h6>
											<!-- Info -->
											<ul class="nav nav-divider small mb-2">
												<li class="nav-item">${rvwVO.rsvDt}</li>
											</ul>
										</div>
										<!-- Review star -->
										<div class="icon-lg rounded text-bg-warning fs-6"><i class="bi bi-star-fill"></i>${rvwVO.rvwStar}</div>
									</div>
									
									<p class="mb-2">${rvwVO.rvwCntn}</p>
									
									<!-- Images -->
									<div class="row g-4">
										<div class="col-4 col-sm-3 col-lg-2">
											<img src="/resources/booking/assets/images/category/hotel/4by3/07.jpg" class="rounded" alt="">
										</div>
										<div class="col-4 col-sm-3 col-lg-2">
											<img src="/resources/booking/assets/images/category/hotel/4by3/08.jpg" class="rounded" alt="">
										</div>
										<div class="col-4 col-sm-3 col-lg-2">
											<img src="/resources/booking/assets/images/category/hotel/4by3/05.jpg" class="rounded" alt="">
										</div>
									</div>
								</div>
							</div>
						

							<!-- 사장님 댓글 START -->
							<div class="my-4 ps-2 ps-md-3">
								<div class="d-md-flex p-3 bg-light rounded-3">
									<img class="avatar avatar-sm rounded-circle me-3" src="/resources/booking/assets/images/avatar/02.jpg" alt="avatar">
									<div class="mt-2 mt-md-0">
										<h6 class="mb-1">사장님</h6>
										<p class="mb-0">${rvwVO.rvwCmt}</p>
									</div>
								</div>
							</div>
							<!-- Child review END -->

							<!-- Divider -->
							<hr>
							<!-- Review item END -->
							</c:forEach>


							<!-- 페이지 번호 -->
							<nav class="d-flex justify-content-center" aria-label="navigation">
								<ul class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
									<li class="page-item mb-0 <c:if test='${rvw.startPage < 6}'>disabled</c:if>"><a class="page-link" href="#" tabindex="-1"><i class="fa-solid fa-angle-left"></i></a></li>
									<c:forEach var="pNo" begin="${rvw.startPage}" end="${rvw.endPage}">
									<li class="page-item mb-0 <c:if test='${rvw.currentPage eq pNo}'>active</c:if>"><a class="page-link" href="#">${pNo}</a></li>
									</c:forEach>
									<li class="page-item mb-0 <c:if test='${rvw.endPage == rvw.totalPages}'>disabled</c:if>"><a class="page-link" href="#"><i class="fa-solid fa-angle-right"></i></a></li>
								</ul>
							</nav>
						</div>
						<!-- Card body END -->
						</div>
					</div>		
					<!-- 리뷰 END -->

					<!-- 숙소정보 START -->
					<div class="tab-pane fade" id="tour-pills-tab5" role="tabpanel" aria-labelledby="tour-pills-tab5">
						<div class="card bg-transparent p-0">
								<!-- Card header -->
						<div class="card-header border-bottom bg-transparent px-0 pt-0">
							<h3 class="mb-0">숙소 정보 및 정책</h3>
						</div>

						<!-- Card body START -->
						<div class="card-body pt-4 p-0">
							<!-- List -->
							<ul class="list-group list-group-borderless mb-2">
								<li class="list-group-item d-flex">
									<i class="bi bi-check-circle-fill me-2"></i>사업자등록번호: ${busiVO.busiNo}
								</li>
								<li class="list-group-item d-flex">
									<i class="bi bi-check-circle-fill me-2"></i>전화번호: ${busiVO.busiTel}
								</li>
								<li class="list-group-item d-flex">
									<i class="bi bi-check-circle-fill me-2"></i>이메일: ${busiVO.busiEmail}
								</li>
							</ul>

							<!-- List -->
							<ul class="list-group list-group-borderless mb-2">
								<li class="list-group-item h6 fw-light d-flex mb-0">
									<i class="bi bi-arrow-right me-2"></i>${busiVO.busiPcy}
								</li>
							</ul>

							<!-- Important note -->
							<div class="bg-danger bg-opacity-10 rounded-2 p-3 mb-3">
								<div class="row ">
									<div class="col-2">
										<p class="text-danger">환불 수수료</p>
									</div>
									<div class="col-5">
										<p class="text-danger">체크 인  한달 전: 환불 수수료 없음</br>
										체크 인  1주 전: 결제 금액의 50%</p>
									</div>
									<div class="col-5">
										<p class="text-danger">체크 인  2주 전: 환불 수수료 30%</br>
										체크 인 4일 전: 결제 금액의 70%</p>
									</div>
								</div>
							</div>
						</div>
						<!-- Card body END -->
						</div>
					</div>	
					<!-- Content item END -->

				</div>	
			</div>
			<!-- Tabs Content END -->

			<!-- Right side content START -->
			<aside class="col-xl-4">
				<div class="row g-4">
					<!-- Book now item START -->
					<div class="col-md-6 col-xl-12">
						<div class="card card-body border bg-transparent">
							<!-- Title -->
							<div>가장 저렴한 객실</div>
							<div class="list-inline-item me-1 h6 mb-0">${rmVOList[0].rmNm}</div>
							<div class="hstack gap-2 mb-1 justify-content-end">
							<fmt:formatNumber var="cheapRmPr" value="${rmVOList[0].rmPr}" pattern="#,###,###"/>
								<h3 class="card-title mb-0">${cheapRmPr}원</h3>
								<span class="fs-5">/1박 </span>
							</div>
							<!-- Button -->
							<div class="d-grid gap-2">
								<a id="btnRm" class="btn btn-primary" href="/member/acm/detail/${busiVO.busiId}#tab3">객실 보기</a>
							</div>

						</div>
					</div>
					<!-- Book now item END -->

					<!-- Help item START -->
					<div class="col-md-6 col-xl-12">
						<div class="card card-body bg-light p-4">
							<!-- Title -->
							<h4 class="card-title">사장님과 연락하기</h4>

							<!-- List -->
							<ul class="list-group list-group-borderless">
								<li class="list-group-item py-3">
									<h6 class="mb-0">
										<i class="bi fa-fw bi-alarm text-primary fs-5 me-2"></i>
										<c:set var="chatSt_H" value="${fn:substring(busiVO.chatSt,0,2)}" />
										<c:set var="chatSt_O" value="${fn:substring(busiVO.chatSt,4,6)}" />
										<c:set var="chatEd_H" value="${fn:substring(busiVO.chatEd,0,2)}" />
										<c:set var="chatEd_O" value="${fn:substring(busiVO.chatEd,4,6)}" />
										<span class="h6 fw-light me-1 mb-0">채팅 가능시간:</span>${chatSt_H}:${chatSt_O} - ${chatEd_H}:${chatEd_O}
									</h6>
									
								</li>

								<li class="list-group-item py-0"><hr class="my-0"></li><!-- Divider -->

								<li class="list-group-item py-3">
									<a href="contact.html" class="h6 mb-0">
										<i class="bi fa-fw bi-chat-left-text text-primary fs-5 me-2"></i>실시간 채팅									</a>
								</li>

								<li class="list-group-item py-0"><hr class="my-0"></li><!-- Divider -->

								<li class="list-group-item py-3">
									<a href="#" class="h6 mb-0">
										<i class="bi fa-fw bi-headset text-primary fs-5 me-2"></i>실시간 화상채팅
									</a>
								</li>

								<li class="list-group-item py-0"><hr class="my-0"></li><!-- Divider -->

								<li class="list-group-item pt-3 pb-0">
									
									<a href="contact.html" class="h6 mb-0">
										<i class="bi fa-fw bi-stickies text-primary fs-5 me-2"></i>쪽지 보내기
									</a>
								</li>
							</ul>
						</div>
					</div>
					<!-- Help item END -->
				</div>
			</aside>
			<!-- Right side content END -->

		</div> <!-- Row END -->
	</div>
</section>
<!-- =======================
Tabs-content END -->
</main>
<!-- Map modal START -->
<div class="modal fade" id="mapmodal" tabindex="-1" aria-labelledby="mapmodalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg">
		<div class="modal-content">
			<!-- Title -->
			<div class="modal-header">
				<h5 class="modal-title" id="mapmodalLabel">지도에서 보기</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<!-- Map -->
			<div id="kakaoMap" class="modal-body p-0" style="width:100%;height:350px;">
			
			</div>
			<!-- Button -->
			<div class="modal-footer">
				<a class="btn btn-sm btn-primary mb-0" href="https://map.kakao.com/link/map/${busiVO.lati},${busiVO.longi}"><i class="bi fa-fw bi-pin-map-fill me-2"></i>카카오 맵에서 보기</a>
			</div>
		</div>
	</div>
</div>
<!-- Map modal END -->


<!-- Room modal START -->
<div class="modal fade" id="roomDetail" tabindex="-1" aria-labelledby="roomDetailLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg modal-dialog-centered">
		<div class="modal-content p-0">

			<!-- Title -->
			<div class="modal-header p-3">
				<h5 class="modal-title mb-0" id="roomDetailLabel">방 상세정보</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>

			<!-- Modal body -->
			<div class="modal-body p-0">

				<!-- Card START -->
				<div class="card bg-transparent p-3">
					<!-- Slider START -->
					<div class="tiny-slider arrow-round arrow-dark overflow-hidden rounded-2">
						<div class="tiny-slider-inner rounded-2 overflow-hidden" data-autoplay="true" data-arrow="true" data-dots="false" data-items="1">
							<!-- Image item -->
							<div> <img src="/resources/booking/assets/images/gallery/16.jpg" class="rounded-2" alt="Card image"></div>

							<!-- Image item -->
							<div> <img src="/resources/booking/assets/images/gallery/15.jpg" class="rounded-2" alt="Card image"> </div>

							<!-- Image item -->
							<div> <img src="/resources/booking/assets/images/gallery/13.jpg" class="rounded-2" alt="Card image"> </div>

							<!-- Image item -->
							<div> <img src="/resources/booking/assets/images/gallery/12.jpg" class="rounded-2" alt="Card image"> </div>
						</div>
					</div>
					<!-- Slider END -->

					<!-- Card header -->
					<div class="card-header bg-transparent pb-0">
						<h3 id="rmNm" class="card-title mb-0"></h3>
					</div>

					<!-- Card body START -->
					<div class="card-body">
						<!-- Content -->
						<p id="modal-rmDc"></p>
						
						<div class="row">

							<!-- List -->
							<div class="col-md-6">
							<h5 class="mb-0">기타 정보</h5>
								<!-- List -->
								<ul class="list-group list-group-borderless mt-2 mb-0">
									<li class="list-group-item d-flex mb-0">
										<i class="fa-solid fa-check-circle text-success me-2"></i><span id="stdPp" class="h6 fw-light mb-0"></span>
									</li>
									<li class="list-group-item d-flex mb-0">
										<i class="fa-solid fa-check-circle text-success me-2"></i><span id="maxPp"  class="h6 fw-light mb-0"></span>
									</li>
									<li class="list-group-item d-flex mb-0">
										<i class="fa-solid fa-check-circle text-success me-2"></i><span id="ppExFee"  class="h6 fw-light mb-0"></span>
									</li>
								</ul>
							</div>

							<!-- List -->
							<div class="col-md-6">
							<h5 class="mb-0">기타 정보</h5>
								<!-- List -->
								<ul class="list-group list-group-borderless mt-2 mb-0">
									<li class="list-group-item d-flex mb-0">
										<i class="fa-solid fa-check-circle text-success me-2"></i><span class="h6 fw-light mb-0"></span>
									</li>
								</ul>
							</div>
						</div> <!-- Row END -->
					</div>
					<!-- Card body END -->
				</div>
				<!-- Card END -->
			</div>
		</div>
	</div>
</div>
<!-- Room modal END -->


<!--토스트 START  -->
 <div id="toastRmNum" class="toast" data-autohide="false">
    <div class="toast-body">
		방 번호를 선택해 주세요 
    </div>
</div>
<!--토스트 END  -->


<!--링크 복사 토스트 START  -->
<div id="toastCopyLink" class="toast"  data-autohide="false">
    <div class="toast-body">
		URL이 복사 되었습니다.
    </div>
</div>
<!--링크 복사 토스트 END  -->
<script type="text/javascript">

</script>
</body>
